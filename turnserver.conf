# Coturn TURN server configuration

# Listening port for TURN server
listening-port=3478

# TLS listening port
tls-listening-port=5349

# Listening IP address
listening-ip=0.0.0.0

# Relay IP address (will be set via environment variable or auto-detected)
# relay-ip=YOUR_PUBLIC_IP

# External IP address (important for NAT traversal)
# external-ip=YOUR_PUBLIC_IP

# Realm used for authentication
realm=turn.example.com

# Server name used for authentication
server-name=turn.example.com

# Enable long-term credential mechanism
lt-cred-mech

# Use time-limited credentials
use-auth-secret
static-auth-secret=your-super-secret-key-change-this

# Total quota allocation
user-quota=12
total-quota=1200

# Maximum number of peers
max-bps=3000000

# Minimum and maximum port range for relay endpoints
# Railway requiere un rango más pequeño para mejor performance
min-port=50000
max-port=50100

# Enable verbose logging (disable in production)
verbose

# Log file location
log-file=/var/log/turnserver.log

# Disable CLI
no-cli

# Enable fingerprinting for WebRTC
fingerprint

# Disable UDP relay endpoints (use only TCP/TLS)
# no-udp-relay

# Disable TCP relay endpoints
# no-tcp-relay

# Allow TURN functionality
# Enable STUN functionality
# Both are enabled by default

# Denial of service protection
# Limit the number of allocations per session/user
max-allocate-lifetime=3600

# Certificate for TLS (if you have SSL certificates)
# cert=/path/to/cert.pem
# pkey=/path/to/private-key.pem

# Use SQLite database for user management (optional)
# userdb=/var/lib/turn/turndb

# Banned and allowed peer IP addresses
# denied-peer-ip=192.168.0.0-192.168.255.255
# denied-peer-ip=10.0.0.0-10.255.255.255
# denied-peer-ip=172.16.0.0-172.31.255.255

# Allow loopback peers (for testing)
# allow-loopback-peers

# Redis database for sessions (optional, for scaling)
# redis-userdb="ip=127.0.0.1 dbname=0 password=secret connect_timeout=30"

# Enable Prometheus metrics
# prometheus

# Disable software version in responses
no-software-attribute

# Security options
# no-multicast-peers
stale-nonce=600

# Enable mobility support
mobility

# Disable TLS/DTLS 1.0 (use only 1.2+)
no-tlsv1
no-tlsv1_1
